(window.webpackJsonprepo=window.webpackJsonprepo||[]).push([[0],{132:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},167:function(e,t,a){e.exports=a(357)},172:function(e,t,a){},173:function(e,t,a){},175:function(e,t,a){},357:function(e,t,a){"use strict";a.r(t);var r=a(1),o=a.n(r),n=a(53),c=a.n(n),s=(a(172),a(17)),i=a(18),l=a(20),u=a(19),h=a(21),d=(a(173),a(132)),p=a.n(d),m=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"}),o.a.createElement("h1",{className:"App-title"},this.props.title)," ")}}]),t}(o.a.Component),y=a(24),f=a.n(y),k=a(56),E=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,"Stock: ",this.props.body," Current price: ",this.props.currentPriceToShow," ","Amount: ",this.props.amount," Total value:"," ",this.props.stockTotalValueToShow,o.a.createElement("button",{onClick:this.props.delete},"X"))}}]),t}(o.a.Component),b=(a(175),a(14)),g=(a(356),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={addStockVisible:!1},e.state={addGraphVisible:!1},e.state={showUSD:!0},e.addStock=function(){e.state.stockArray.length>=50?alert("You can not add more than 50 stocks in a portfolio"):e.getStockData()},e.newStock=function(t){e.body=t.target.value.toUpperCase()},e.newStockAmount=function(t){e.amount=t.target.value},e.setGraphStartDate=function(t){e.startDate=t.target.value,e.generateGraphLines(),e.generateGraphRows()},e.setGraphEndDate=function(t){e.lastDate=t.target.value,e.generateGraphLines(),e.generateGraphRows()},e.changeChecked=function(t){if(e.state.checkedArray.includes(t.target.id)){e.isChecked=!1;for(var a=0,r=0;r<e.state.checkedArray.length;r++)e.state.checkedArray[r]===t.target.id&&(a=r);e.state.checkedArray.splice(a,1)}else e.isChecked=!0,e.state.checkedArray.push(t.target.id)},e.deleteStock=function(t){var a=Object.assign([],e.state.stockArray);a.splice(t,1),e.setState({stockArray:a})},e.changeExchangeRateUSDEUR=function(){e.setState({showUSD:!1},e.getExchangeRateUSDEUR)},e.changeExchangeRateEURUSD=function(){e.setState({showUSD:!0}),e.getExchangeRateEURUSD()},e.calculatePortfolioPrice=function(){for(var t=0,a=0;a<e.state.stockArray.length;a++)t+=e.state.stockArray[a].stockTotalValueToShow;return t},e.getCheckedStatus=function(t){return!!e.state.checkedArray.includes(t)},e.createListOfStocks=function(){for(var t=[],a=0;a<e.state.stockArray.length;a++)t.push(o.a.createElement("tr",null)),t.push(o.a.createElement("td",{key:e.state.stockArray[a].body},o.a.createElement("input",{type:"checkbox",defaultChecked:e.getCheckedStatus(e.state.stockArray[a].body),onChange:e.changeChecked,name:e.state.stockArray[a].body,id:e.state.stockArray[a].body}))),t.push(o.a.createElement("td",{key:e.state.stockArray[a].body},e.state.stockArray[a].body));return t},e.generateGraphRows=function(){for(var t=[],a=0,r=0,o=0,n=0,c=0,s=0;s<e.state.stockArray.length;s++)if(e.state.checkedArray.includes(e.state.stockArray[s].body)){for(var i in e.state.stockArray[s].dailyData)n+=1;n>c&&(c=n,o=s),n=0}0!==o&&(e.state.stockArray.unshift(e.state.stockArray[o]),o+=1,e.state.stockArray.splice(o,1));for(var l=0;l<e.state.stockArray.length;l++)if(e.state.checkedArray.includes(e.state.stockArray[l].body)){var u=e.state.stockArray[l].dailyData,h=e.state.stockArray[l].body;for(var i in u)if(i<e.startDate||i>e.lastDate);else if(u[i]){var d=u[i]["4. close"];a>=1?t[r].date===i&&(t[r][h]=d,r-=1):(t.unshift({date:i}),t[0][h]=d)}r=t.length-1,a+=1}return t},e.generateGraphLines=function(){for(var t=[],a=0;a<e.state.stockArray.length;a++)t.push(e.state.stockArray[a].body);return t},e.StockId=0,e.body="",e.amount=0,e.lastRefreshed="",e.currentPriceToShow=0,e.stockTotalValueToShow=0,e.startDate=new Date,e.lastDate=new Date,e.isChecked=!0,e.metaData=[],e.dailyData=[],e.columns=[{Header:"StockName",fieldname:"body"},{Header:"StockPrice",fieldname:"currentPriceToShow"},{Header:"Amount",fieldname:"amount"},{Header:"Total stock price",fieldname:"stockTotalValueToShow"}],e.state={stockArray:[],checkedArray:[]},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getStockData",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,a,r,o,n,c,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=!1,a=0;a<this.state.stockArray.length;a++)this.state.stockArray[a].body===this.body&&(t=!0,alert("The stock you entered is already in your portfolio, you cannot add the same stock again"));if(t){e.next=20;break}return"https://www.alphavantage.co/query?function=","&outputsize=full&symbol=","&apikey=","TIME_SERIES_DAILY",r=this.body,"HRVEIW5PUW3N2CRS",o="https://www.alphavantage.co/query?function=".concat("TIME_SERIES_DAILY","&outputsize=full&symbol=",r,"&apikey=","HRVEIW5PUW3N2CRS"),e.next=12,fetch(o);case 12:return n=e.sent,e.next=15,n.json();case 15:c=e.sent,this.metaData=c["Meta Data"],this.dailyData=c["Time Series (Daily)"],this.setState({loading:!1}),void 0===c["Meta Data"]?alert("The symbol for the stock you entered can not be found, try again"):isNaN(this.amount)?alert("The number of the amount of stocks has to be a number, try again"):this.amount<=0?alert("The number of the amount of stocks has to be atleast 1, try again"):(this.lastRefreshed=c["Meta Data"]["3. Last Refreshed"].substring(0,10),this.currentPriceToShow=c["Time Series (Daily)"][this.lastRefreshed]["4. close"],this.currentPriceToShow=Math.round(100*this.currentPriceToShow)/100,this.stockTotalValueToShow=this.currentPriceToShow*this.amount,this.startDate=new Date((new Date).setDate((new Date).getDate()-100)).toLocaleDateString("en-CA"),this.lastDate=(new Date).toLocaleDateString("en-CA"),this.isChecked=!0,this.StockId=this.StockId+1,(s=Object.assign([],this.state.stockArray)).push({StockId:this.StockId,body:this.body,amount:this.amount,metaData:this.metaData,dailyData:this.dailyData,startDate:this.startDate,lastDate:this.lastDate,isChecked:this.isChecked,lastRefreshed:this.lastRefreshed,stockTotalValueToShow:this.stockTotalValueToShow,currentPriceToShow:this.currentPriceToShow}),(i=Object.assign([],this.state.checkedArray)).push(this.body),this.setState({stockArray:s,checkedArray:i}),alert("The stock "+this.body+" has been added to the portfolio!"));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getExchangeRateUSDEUR",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,a,r,o,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://www.alphavantage.co/query?function=","&from_currency=USD&to_currency=EUR&apikey=","CURRENCY_EXCHANGE_RATE","HRVEIW5PUW3N2CRS",t="https://www.alphavantage.co/query?function=".concat("CURRENCY_EXCHANGE_RATE","&from_currency=USD&to_currency=EUR&apikey=","HRVEIW5PUW3N2CRS"),e.next=7,fetch(t);case 7:return a=e.sent,e.next=10,a.json();case 10:r=e.sent,o=parseFloat(r["Realtime Currency Exchange Rate"]["5. Exchange Rate"]),n=this.currentPriceToShow*o,this.setState({currentPriceToShow:n}),console.log("Current price to show: "+n);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getExchangeRateEURUSD",value:function(){var e=Object(k.a)(f.a.mark((function e(){var t,a,r,o,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://www.alphavantage.co/query?function=","&from_currency=EUR&to_currency=USD&apikey=","CURRENCY_EXCHANGE_RATE","HRVEIW5PUW3N2CRS",t="https://www.alphavantage.co/query?function=".concat("CURRENCY_EXCHANGE_RATE","&from_currency=EUR&to_currency=USD&apikey=","HRVEIW5PUW3N2CRS"),e.next=7,fetch(t);case 7:return a=e.sent,e.next=10,a.json();case 10:r=e.sent,o=parseFloat(r["Realtime Currency Exchange Rate"]["5. Exchange Rate"]),n=this.currentPriceToShow*o,this.setState({currentPriceToShow:n}),console.log("Current price to show: "+this.currentPriceToShow);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"OnePortfolio"},o.a.createElement("strong",null,this.props.body),o.a.createElement("br",null),o.a.createElement("strong",null,"Portfiolio total price:")," ",this.calculatePortfolioPrice(),o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("ul",null,this.state.stockArray.map((function(t,a){return o.a.createElement(E,{key:t.id,id:t.id,body:t.body,currentPriceToShow:t.currentPriceToShow,stockTotalValueToShow:t.stockTotalValueToShow,amount:t.amount,delete:e.deleteStock.bind(e,a)})}))),o.a.createElement("div",{className:"PortfolioButtons"},o.a.createElement("button",{className:"AddStock","data-modal-target":"#addStockPopup",onClick:function(t){return e.setState({addStockVisible:!0})}},"Add stock"),o.a.createElement("button",{className:"PerfGraph","data-modal-target":"#addGraphPopup",onClick:function(t){return e.setState({addGraphVisible:!0})}},"Perf graph"),o.a.createElement("button",{className:"ChangeCurrency",onClick:this.changeExchangeRateUSDEUR},"Display in \u20ac"),o.a.createElement("button",{className:"ChangeCurrency",onClick:this.changeExchangeRateEURUSD},"Display in $"),o.a.createElement("button",{className:"DeletePortfolio",onClick:this.props.delete},"Delete")),this.state.addStockVisible?o.a.createElement("div",{className:"addStockPopup",id:"addStockPopup"},o.a.createElement("div",{className:"addStockPopupHeader"},o.a.createElement("div",{className:"title"},"Add stock to portfolio"),o.a.createElement("button",{className:"close-button",onClick:function(t){return e.setState({addStockVisible:!1})}},"X")),o.a.createElement("div",{className:"addStockPopupBody"},"Symbol name of stock:"," ",o.a.createElement("input",{type:"text",onBlur:this.newStock}),o.a.createElement("br",null),"Amount of shares owned:"," ",o.a.createElement("input",{type:"text",onBlur:this.newStockAmount}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.addStock},"Add stock to portfolio"),o.a.createElement("br",null),"(The fetching of the stock values might take a while, be patient)"),o.a.createElement("div",{id:"overlay"})):null,this.state.addGraphVisible?o.a.createElement("div",{className:"addGraphPopup",id:"addGraphPopup"},o.a.createElement("div",{className:"addGraphPopupHeader"},o.a.createElement("div",{className:"title"},"Stock Performance Graph"),o.a.createElement("button",{className:"close-button",onClick:function(t){return e.setState({addGraphVisible:!1})}},"Close")),o.a.createElement("div",{className:"addGraphPopupBody"},o.a.createElement("div",{className:"stockList"},"List stocks here: ",o.a.createElement("br",null),o.a.createElement("table",null,o.a.createElement("tbody",null,this.createListOfStocks()))),o.a.createElement("div",{className:"graph"},o.a.createElement(b.e,null,o.a.createElement(b.d,{width:600,"max-width":80,height:300,data:this.generateGraphRows(),margin:{top:5,right:30,left:20,bottom:5}},o.a.createElement(b.g,{dataKey:"date"}),o.a.createElement(b.h,{type:"number",domain:[0,300]}),o.a.createElement(b.a,{strokeDasharray:"3 3"}),o.a.createElement(b.f,null),o.a.createElement(b.b,null),this.generateGraphLines().map((function(e){return o.a.createElement(b.c,{type:"monotone",dataKey:e,dot:!1})}))))),o.a.createElement("div",{className:"graphDates"},o.a.createElement("input",{type:"date",id:"startDate",name:"Stock start date",onChange:this.setGraphStartDate,defaultValue:new Date((new Date).setDate((new Date).getDate()-100)).toLocaleDateString("en-CA")}),o.a.createElement("input",{type:"date",id:"endDate",name:"Stock end date",onChange:this.setGraphEndDate,defaultValue:(new Date).toLocaleDateString("en-CA")}),o.a.createElement("button",{onClick:this.generateGraphRows},"Apply date"))),o.a.createElement("div",{id:"overlay"})):null,o.a.createElement("br",null)))}}]),t}(o.a.Component)),S=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).deletePortfolio=function(t){var a=Object.assign([],e.state.portfolioArray);a.splice(t,1),e.setState({portfolioArray:a})},e.newPortfolio=function(t){e.body=t.target.value},e.addPortfolio=function(){if(e.state.portfolioArray.length>=10)alert("You can not create more than 10 portfolios");else{for(var t=!1,a=0;a<e.state.portfolioArray.length;a++)e.body.toLowerCase()===e.state.portfolioArray[a].body.toLowerCase()&&(console.log(e.body.toLowerCase()),alert("Portfolio with the same name already exists, try again!"),t=!0);if(t)t=!1;else{e.portfolioId=e.portfolioId+1;var r=Object.assign([],e.state.portfolioArray);r.push({id:e.portfolioId,body:e.body}),e.setState({portfolioArray:r})}}},e.changePortfolioPrice=function(t){e.portfolioPrice=t},e.portfolioId=0,e.body="",e.portfolioPrice=0,e.state={portfolioArray:[]},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(m,{title:"Welcome to your SPMS!"}),o.a.createElement("input",{type:"text",onBlur:this.newPortfolio}),o.a.createElement("button",{onClick:this.addPortfolio},"Add Portfolio"),o.a.createElement("ul",null,o.a.createElement("div",{className:"PortfolioItem"},this.state.portfolioArray.map((function(t,a){return o.a.createElement(g,{key:t.id,id:t.id,body:t.body,delete:e.deletePortfolio.bind(e,a)})})))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[167,1,2]]]);
//# sourceMappingURL=main.7a72c296.chunk.js.map